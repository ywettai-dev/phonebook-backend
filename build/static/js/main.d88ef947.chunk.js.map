{"version":3,"sources":["services/persons.js","components/Persons.js","components/PersonForm.js","components/Filter.js","components/SuccessMessage.js","components/ErrorMessage.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Persons","persons","deleteNameOf","map","person","key","name","number","onClick","PersonForm","addName","newName","newNum","handleNameChange","handleNumChange","onSubmit","value","onChange","type","Filter","filterName","handleFilterChange","SuccessMessage","message","className","ErrorMessage","App","useState","setPersons","setNewName","setNewNum","setFilterName","successMessage","setSuccessMessage","errorMessage","setErrorMessage","useEffect","personService","initialData","successText","setTimeout","errorText","responseError","defaultError","error","personsToShow","filter","toLowerCase","includes","e","target","preventDefault","personObject","checkSameName","indexOf","sameNameIndex","window","confirm","returnedObject","catch","concat","console","log","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d88ef947.chunk.js","sourcesContent":["import axios from 'axios';\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n    const request = axios.get(baseUrl);\n    return request.then(response => response.data)\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject);\n    return request.then(response => response.data);\n}\n\nconst update = ( id, newObject ) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject);\n    return request.then(response => response.data);\n}\n\nconst deletePerson = ( id ) => {\n    const request = axios.delete(`${baseUrl}/${id}`);\n    return request.then(response => response.data);\n}\n\nexport default { getAll, create, update, deletePerson };","import React from 'react';\n\nconst Persons = ({ persons, deleteNameOf }) => {\n    return(\n        <div>\n            {\n                persons.map(person => \n                <p key={person.id}>\n                    {person.name} {person.number} \n                    <button onClick={() => deleteNameOf(person.id, person.name)}>\n                        Delete\n                    </button>\n                </p>\n                )\n            }\n        </div>\n    )\n}\n\nexport default Persons;","import React from 'react';\n\nconst PersonForm = ({addName, newName, newNum, handleNameChange, handleNumChange}) => {\n    return(\n        <form onSubmit={addName}>\n            <div>\n                name: <input value={newName} onChange={handleNameChange}/>\n            </div>\n            <div>\n                number: <input value={newNum} onChange={handleNumChange}/>\n            </div>\n            <div>\n                <button type=\"submit\">add</button>\n            </div>\n        </form>\n    )\n}\n\nexport default PersonForm;","import React from 'react';\n\nconst Filter = ({filterName, handleFilterChange}) => {\n    return(\n        <div>\n            filter shown with: <input value={filterName} onChange={handleFilterChange}/>\n        </div>\n    )\n}\n\nexport default Filter;","import React from 'react';\n\nconst SuccessMessage = ({message}) => {\n    if (message === null) {\n        return null;\n    }\n\n    return (\n        <div className=\"success\">\n            {message}\n        </div>\n    )\n}\n\nexport default SuccessMessage;","import React from 'react';\n\nconst ErrorMessage = ({message}) => {\n    if (message === null) {\n        return null;\n    }\n\n    return (\n        <div className=\"error\">\n            {message}\n        </div>\n    )\n}\n\nexport default ErrorMessage;","import React, { useState, useEffect } from 'react';\nimport personService from './services/persons';\nimport Persons from './components/Persons';\nimport PersonForm from './components/PersonForm';\nimport Filter from './components/Filter';\nimport SuccessMessage from './components/SuccessMessage';\nimport ErrorMessage from './components/ErrorMessage';\nimport './index.css';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNum, setNewNum] = useState('');\n  const [filterName, setFilterName] = useState('');\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n  \n  const hook = () => {\n    personService\n    .getAll()\n    .then(initialData => {\n      setPersons(initialData);\n    });\n  };\n\n  useEffect(hook, []);\n\n  const successText = message => {\n    setSuccessMessage(message);\n    setTimeout(() => {\n      setSuccessMessage(null);\n    }, 5000);\n  }\n  \n  const errorText = (responseError, defaultError) => {\n    const message = responseError.response.data ? `Error: ${responseError.response.data.error}` : defaultError\n    setErrorMessage(message);\n    setTimeout(() => {\n      setErrorMessage(null);\n    }, 5000);\n  }\n\n  const addName = (e) => {\n    e.preventDefault();\n    const personObject = {\n      name: newName,\n      number: newNum\n    };\n    // if the user already exists then check whether the user wants to update phone number or not\n    // else create a new person\n    const checkSameName = persons.map(person => person.name).indexOf(newName);\n    if(checkSameName > -1) {\n      const sameNameIndex = persons[checkSameName];\n      window.confirm(`${newName} is already added to the phonebook, replace the old number with a new one?`);\n      personService\n      .update(sameNameIndex.id, personObject)\n      .then(returnedObject => {\n        setPersons(persons\n          .map(person => person.id !== sameNameIndex.id \n            ? person \n            : returnedObject\n          )\n        );\n        successText(`Updated ${newName} information`);\n      })\n      .catch(error => {\n        errorText(`Information of '${newName}' was already removed from the server.`);\n      })\n    }else {\n      personService\n      .create(personObject)\n      .then(returnedObject => {\n        setPersons(persons.concat(returnedObject));\n        successText(`Added ${newName} information`);\n        setNewName('');\n        setNewNum('');\n      })\n      .catch(error => {\n        console.log(error.response.data.error)\n        errorText(error, error.message)\n      })\n    }\n  };\n\n  const deleteNameOf = (id, name) => {\n    if(window.confirm(`Delete ${name} ?`)) {\n      personService\n      .deletePerson(id)\n      .then(() => {\n        setPersons(persons.filter(person => person.id !== id));\n        successText(`Deleted ${name} information`);\n      })\n      .catch(error => {\n        errorText(`'${name}' has already deleted`);\n      })\n    }\n  }\n\n  const personsToShow = persons.filter(person => \n    person.name.toLowerCase().includes(filterName.toLowerCase())\n  );\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const handleNumChange = (e) => {\n    setNewNum(e.target.value);\n  };\n\n  const handleFilterChange = (e) => {\n    setFilterName(e.target.value);\n  };\n\n  return(\n    <div>\n      <h1>Phonebook</h1>\n      <SuccessMessage message={successMessage}/>\n      <ErrorMessage message={errorMessage}/>\n      <Filter\n        filterName={filterName}\n        handleFilterChange={handleFilterChange}\n      />\n      <h2>Add a new contact</h2>\n      <PersonForm\n        addName={addName}\n        newName={newName}\n        newNum={newNum}\n        handleNameChange={handleNameChange}\n        handleNumChange={handleNumChange}\n       />\n      <h2>Numbers</h2>\n      <Persons\n        persons={personsToShow}\n        deleteNameOf={deleteNameOf}\n      />\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App/>, document.getElementById('root'));"],"sourceRoot":""}